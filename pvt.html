<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Psychomotor Vigilance Task (PVT), PANAS & PHQ-9</title>

  <link rel="stylesheet" type="text/css" href="style.css">

  <script src="auth.js"></script>
  <script src="telegram.js"></script>
</head>
<body>
  <div id="progress-bar-container"><div id="progress-bar"></div></div>

  <!-- START SCREEN -->
  <div class="container" id="start-screen">
    <h1>PVT, PANAS & PHQ-9</h1>

    <div>
      <label for="location">Location (machine?):</label>
      <input id="location" value="??">
    </div>
    <div>
      <label for="test-duration">Test Duration (s):</label>
      <input type="number" id="test-duration" value="180" min="10" max="1800">
    </div>
    <div>
      <label for="min-delay">Min Rest (ms):</label>
      <input type="number" id="min-delay" value="2000" min="1000" max="10000">
    </div>
    <div>
      <label for="max-delay">Max Rest (ms):</label>
      <input type="number" id="max-delay" value="10000" min="2000" max="20000">
    </div>

    <div id="preset-buttons">
      <h3>Quick Presets</h3>
      <button class="preset-btn" data-duration="60"  data-min-delay="2000"  data-max-delay="5000">1 min</button>
      <button class="preset-btn" data-duration="120" data-min-delay="2000"  data-max-delay="10000">2 min</button>
      <button class="preset-btn" data-duration="180" data-min-delay="2000"  data-max-delay="10000">3 min</button>
      <button class="preset-btn" data-duration="240" data-min-delay="2000"  data-max-delay="10000">4 min</button>
      <button class="preset-btn" data-duration="300" data-min-delay="2000"  data-max-delay="10000">5 min</button>
    </div>

    <div>
      <button id="start-btn">Start PVT</button>
      <button id="start-panas-btn">Start PANAS</button>
      <button id="start-combined-btn">Start Combined (BF→PANAS→PVT)</button>
      <button id="start-phq9-btn">Start PHQ-9</button>
      <button id="start-brainfog-btn">Start Brain Fog Only</button>
    </div>
  </div>

  <!-- PVT SCREEN -->
  <div class="container" id="task-screen">
    <button id="pvt-start-btn">Start</button>   <!-- NEW -->
    <p id="stimulus">Get Ready…</p>
    <button id="stop-btn">Stop Test</button>
  </div>

  <!-- PANAS SCREEN -->
  <div class="container" id="panas-screen">
    <p id="panas-header">Indicate how you feel right now</p>
    <div id="panas-word">
      <span id="panas-word-en"></span><br>
      <span id="panas-word-ru"></span>
    </div>
    <div id="panas-options" class="panas-options-container"></div>
  </div>

  <!-- PHQ-9 SCREEN -->
  <div class="container" id="phq9-screen">
    <p id="phq9-header">PHQ-9: How often…</p>
    <div id="phq9-question">
      <span id="phq9-question-en"></span><br>
      <span id="phq9-question-ru"></span>
    </div>
    <div id="phq9-options" class="panas-options-container"></div>
  </div>

  <!-- BRAIN FOG SCREEN -->
  <div class="container" id="brainfog-screen">
    <p id="brainfog-header">Answer the following…</p>
    <div id="brainfog-question">
      <span id="brainfog-question-en"></span><br>
      <span id="brainfog-question-ru"></span>
    </div>
    <div id="brainfog-options" class="brainfog-option-row"></div>
    <div id="brainfog-hints" class="brainfog-label-under">
      <div style="display:flex;justify-content:space-between">
        <div id="label-left"></div>
        <div id="label-right"></div>
      </div>
      <div id="brainfog-mid-label"></div>
    </div>
  </div>

  <!-- END SCREEN -->
  <div class="container" id="end-screen">
    <h1>Task Complete</h1>
    <p id="results"></p>
    <pre id="full-reaction-times"></pre>
    <button id="restart-btn">Restart</button>
  </div>

  <!-- load our modules -->
  <script type="module" src="main.js"></script>
</body>
</html>
